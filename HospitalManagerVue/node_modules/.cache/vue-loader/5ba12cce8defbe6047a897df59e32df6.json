{"remainingRequest":"G:\\医院管理系统\\HospitalManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\医院管理系统\\HospitalManagerVue\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\医院管理系统\\HospitalManagerVue\\src\\views\\Login.vue","mtime":1753237701341},{"path":"G:\\医院管理系统\\HospitalManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"G:\\医院管理系统\\HospitalManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1689001370000},{"path":"G:\\医院管理系统\\HospitalManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"G:\\医院管理系统\\HospitalManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1689001370000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdC5qcyI7CmltcG9ydCB7IHNldFRva2VuIH0gZnJvbSAiQC91dGlscy9zdG9yYWdlLmpzIjsKaW1wb3J0IHsgdG9Mb2FkIH0gZnJvbSAiQC91dGlscy9pbml0aWFsaXplLmpzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJMb2dpbiIsCiAgICBkYXRhKCkgewogICAgICAgIHZhciB2YWxpZGF0ZU1vYmxpZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5omL5py65Y+3IikpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGV0IHJlZyA9CiAgICAgICAgICAgICAgICAgICAgL14xKDNbMC05XXw0WzUsN118NVswLDEsMiwzLDUsNiw3LDgsOV18NlsyLDUsNiw3XXw3WzAsMSw3LDhdfDhbMC05XXw5WzEsOCw5XSlcZHs4fSQvOwogICAgICAgICAgICAgICAgaWYgKCFyZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeWQiOazleeahOaJi+acuuWPtyIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHZhciB2YWxpZGF0ZUNhcmQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpei6q+S7veivgeWPtyIpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxldCByZWcgPSAvKF5cZHsxNX0kKXwoXlxkezE4fSQpfCheXGR7MTd9KFxkfFh8eCkkKS87CiAgICAgICAgICAgICAgICBpZiAoIXJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5ZCI5rOV55qE6Lqr5Lu96K+B5Y+356CBIikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdmFyIHZhbGlkYXRlUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXlr4bnoIEiKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5kRm9ybS5jaGVja1Bhc3N3b3JkICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZmluZEZvcm0udmFsaWRhdGVGaWVsZCgiY2hlY2tQYXNzd29yZCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdmFyIHZhbGlkYXRlUGFzczIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+35YaN5qyh6L6T5YWl5a+G56CBIikpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLmZpbmRGb3JtLm5ld1Bhc3N3b3JkKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEiKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvL+iDjOaZr+WbvueJhwogICAgICAgICAgICBiYWNrZ3JvdW5kRGl2OiB7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6CiAgICAgICAgICAgICAgICAgICAgInVybCgiICsgcmVxdWlyZSgiLi4vYXNzZXRzL2RvY3Rvci5qcGVnIikgKyAiKSIsCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAibm8tcmVwZWF0IiwKICAgICAgICAgICAgICAgIGJhY2tncm91bmRTaXplOiAiMTAwJSAxMDAlIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgICAgICAgICBpZDogIiIsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgICAgICAgICBjYXB0Y2hhOiAiIiwgIC8vIOaWsOWinumqjOivgeeggeWtl+autQogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2dpblJ1bGVzOiB7CiAgICAgICAgICAgICAgICBpZDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXotKblj7fnvJblj7ciLAogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMywKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiA1MCwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIumVv+W6puWcqCAz5YiwIDUwIOS4quWtl+espiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIC8vIOaWsOWinumqjOivgeeggemqjOivgeinhOWImQogICAgICAgICAgICAgICAgY2FwdGNoYTogWyAgLy8g5paw5aKeCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpemqjOivgeeggSIsIHRyaWdnZXI6ICJibHVyIiB9LCAgLy8g5paw5aKeCiAgICAgICAgICAgICAgICAgICAgeyBtaW46IDQsIG1heDogNCwgbWVzc2FnZTogIumqjOivgeeggemVv+W6puS4ujTkvY0iLCB0cmlnZ2VyOiAiYmx1ciIgfSAgLy8g5paw5aKeCiAgICAgICAgICAgICAgICBdLCAgLy8g5paw5aKeCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJvbGU6ICLmgqPogIUiLAogICAgICAgICAgICBmaW5kUm9sZTogIuaCo+iAhSIsCiAgICAgICAgICAgIC8v5om+5Zue5a+G56CBCiAgICAgICAgICAgIGZpbmRGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgICAgICAgIGZpbmRGb3JtOiB7CiAgICAgICAgICAgICAgICBjb2RlOiAiIiwKICAgICAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiAiIiwKICAgICAgICAgICAgICAgIGNoZWNrUGFzc3dvcmQ6ICIiLAogICAgICAgICAgICAgICAgcEVtYWlsOiAiIiwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGZpbmRSdWxlczogewogICAgICAgICAgICAgICAgcEVtYWlsOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpemCrueuseWcsOWdgCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVtYWlsIiwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeato+ehrueahOmCrueuseWcsOWdgCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IFsiYmx1ciIsICJjaGFuZ2UiXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGNvZGU6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl6aqM6K+B56CBIiwKICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgICAgICAgICBjaGVja1Bhc3N3b3JkOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzczIsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG90YWxUaW1lOiA2MCwKICAgICAgICAgICAgY29udGVudDogIuWPkemAgemqjOivgeeggSIsCiAgICAgICAgICAgIGNhbkNsaWNrOiB0cnVlLAogICAgICAgICAgICAvL+azqOWGjAogICAgICAgICAgICByZWdpc3RlckZvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgcmVnaXN0ZXJGb3JtOiB7CiAgICAgICAgICAgICAgICBwR2VuZGVyOiAi55S3IiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVnaXN0ZXJSdWxlczogewogICAgICAgICAgICAgICAgcElkOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpei0puWPtyIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLotKblj7flv4XpobvmlbDlrZfnsbvlnosiLAogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwUGFzc3dvcmQ6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBtaW46IDQsCiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogNTAsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggNOWIsCA1MCDkuKrlrZfnrKYiLAogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwTmFtZTogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXlp5PlkI0iLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMiwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiA4LAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6ZW/5bqm5ZyoIDLliLAgOCDkuKrlrZfnrKYiLAogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBwRW1haWw6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6YKu566xIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZW1haWwiLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu55qE6YKu566x5Zyw5Z2AIiwKICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogWyJibHVyIiwgImNoYW5nZSJdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcFBob25lOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlTW9ibGllIH1dLAogICAgICAgICAgICAgICAgcENhcmQ6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVDYXJkIH1dLAogICAgICAgICAgICAgICAgcEJpcnRoZGF5OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIumAieaLqeWHuueUn+aXpeacnyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5paw5aKe6aqM6K+B56CB55u45YWz5bGe5oCnCiAgICAgICAgICAgIGNhcHRjaGFVcmw6ICIiLCAgLy8g5paw5aKe77ya6aqM6K+B56CB5Zu+54mHVVJMCiAgICAgICAgfTsKICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRvTG9hZCgpOwogICAgICAgIHRoaXMucmVmcmVzaENhcHRjaGEoKTsgIC8vIOWFs+mUru+8mumhtemdouWIneWni+WMluaXtuiwg+eUqO+8jOiHquWKqOiOt+WPlumqjOivgeeggQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLyDmlrDlop7vvJrliLfmlrDpqozor4HnoIEKICAgICAgICByZWZyZXNoQ2FwdGNoYSgpIHsgIC8vIOaWsOWingogICAgICAgICAgICAvLyDmoLnmja7op5LoibLojrflj5blr7nlupTpqozor4HnoIHmjqXlj6MKICAgICAgICAgICAgbGV0IHVybCA9ICIiOyAgLy8g5paw5aKeCiAgICAgICAgICAgIGlmICh0aGlzLnJvbGUgPT09ICLnrqHnkIblkZgiKSB7ICAvLyDmlrDlop4KICAgICAgICAgICAgICAgIHVybCA9ICJhZG1pbi9nZXRDYXB0Y2hhIjsgIC8vIOaWsOWingogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucm9sZSA9PT0gIuWMu+eUnyIpIHsgIC8vIOaWsOWingogICAgICAgICAgICAgICAgdXJsID0gImRvY3Rvci9nZXRDYXB0Y2hhIjsgIC8vIOaWsOWingogICAgICAgICAgICB9IGVsc2UgeyAgLy8g5paw5aKeCiAgICAgICAgICAgICAgICB1cmwgPSAicGF0aWVudC9nZXRDYXB0Y2hhIjsgIC8vIOaWsOWingogICAgICAgICAgICB9ICAvLyDmlrDlop4KICAgICAgICAgICAgLy8g5re75Yqg6ZqP5py65pWw6Ziy5q2i57yT5a2YCiAgICAgICAgICAgIHRoaXMuY2FwdGNoYVVybCA9IHJlcXVlc3QuZGVmYXVsdHMuYmFzZVVSTCArICIvIiArIHVybCArICI/dD0iICsgTWF0aC5yYW5kb20oKTsgIC8vIOaWsOWingogICAgICAgIH0sICAvLyDmlrDlop4KICAgICAgICAvL+eCueWHu+azqOWGjOehruiupOaMiemSrgogICAgICAgIHJlZ2lzdGVyQ2xpY2soZm9ybU5hbWUpIHsKICAgICAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoInBhdGllbnQvYWRkUGF0aWVudCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBJZDogdGhpcy5yZWdpc3RlckZvcm0ucElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBOYW1lOiB0aGlzLnJlZ2lzdGVyRm9ybS5wTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwUGFzc3dvcmQ6IHRoaXMucmVnaXN0ZXJGb3JtLnBQYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwR2VuZGVyOiB0aGlzLnJlZ2lzdGVyRm9ybS5wR2VuZGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBFbWFpbDogdGhpcy5yZWdpc3RlckZvcm0ucEVtYWlsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBQaG9uZTogdGhpcy5yZWdpc3RlckZvcm0ucFBob25lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBDYXJkOiB0aGlzLnJlZ2lzdGVyRm9ybS5wQ2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwQmlydGhkYXk6IHRoaXMucmVnaXN0ZXJGb3JtLnBCaXJ0aGRheSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgIT09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIui0puWPt+aIlumCrueuseW3suiiq+WNoOeUqO+8gSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuazqOWGjOaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBzdWJtaXQhISIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvLyDngrnlh7vmib7lm57lr4bnoIHnoa7orqTmjInpkq4KICAgICAgICBmaW5kUGFzc3dvcmQoZmluZEZvcm0pIHsKICAgICAgICAgICAgdGhpcy4kcmVmc1tmaW5kRm9ybV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICAvL+WmguaenOaYr+mAieS4reaCo+iAhQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmRSb2xlID09PSAi5oKj6ICFIikgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KCJwYXRpZW50L2ZpbmRQYXNzd29yZCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcEVtYWlsOiB0aGlzLmZpbmRGb3JtLnBFbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFBhc3N3b3JkOiB0aGlzLmZpbmRGb3JtLm5ld1Bhc3N3b3JkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiB0aGlzLmZpbmRGb3JtLmNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyAhPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLpqozor4HnoIHplJnor6/miJbogIXlt7Lov4fmnJ/vvIHvvIHvvIEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlr4bnoIHkv67mlLnmiJDlip/vvIHvvIHor7fnmbvlvZUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5piv6YCJ5Lit566h55CG5ZGYCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZFJvbGUgPT09ICLnrqHnkIblkZgiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoImFkbWluL2ZpbmRQYXNzd29yZCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYUVtYWlsOiB0aGlzLmZpbmRGb3JtLnBFbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVBhc3N3b3JkOiB0aGlzLmZpbmRGb3JtLm5ld1Bhc3N3b3JkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiB0aGlzLmZpbmRGb3JtLmNvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyAhPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLpqozor4HnoIHplJnor6/miJbogIXlt7Lov4fmnJ/vvIHvvIHvvIEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlr4bnoIHkv67mlLnmiJDlip/vvIHvvIHor7fnmbvlvZUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5piv6YCJ5Lit5oKj6ICFCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZFJvbGUgPT09ICLljLvnlJ8iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoImRvY3Rvci9maW5kUGFzc3dvcmQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRFbWFpbDogdGhpcy5maW5kRm9ybS5wRW1haWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRQYXNzd29yZDogdGhpcy5maW5kRm9ybS5uZXdQYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogdGhpcy5maW5kRm9ybS5jb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgIT09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi6aqM6K+B56CB6ZSZ6K+v5oiW6ICF5bey6L+H5pyf77yB77yB77yBIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5a+G56CB5L+u5pS55oiQ5Yqf77yB77yB6K+355m75b2VIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8v54K55Ye75Y+R6YCB6aqM6K+B56CB5oyJ6ZKuCiAgICAgICAgc2VuZEVtYWlsKCkgewogICAgICAgICAgICAvL+WAkuiuoeaXtgogICAgICAgICAgICBpZiAoIXRoaXMuY2FuQ2xpY2spIHJldHVybjsgLy/mlLnliqjnmoTmmK/ov5nkuKTooYzku6PnoIEKICAgICAgICAgICAgdGhpcy5jYW5DbGljayA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnRvdGFsVGltZSArICJz5ZCO6YeN5paw5Y+R6YCBIjsKICAgICAgICAgICAgbGV0IGNsb2NrID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudG90YWxUaW1lLS07CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnRvdGFsVGltZSArICJz5ZCO6YeN5paw5Y+R6YCBIjsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvdGFsVGltZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChjbG9jayk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gIumHjeaWsOWPkemAgemqjOivgeeggSI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbFRpbWUgPSAxMDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbkNsaWNrID0gdHJ1ZTsgLy/ov5nph4zph43mlrDlvIDlkK8KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMTAwMCk7CgogICAgICAgICAgICAvL+WmguaenOaYr+mAieS4reaCo+iAhQogICAgICAgICAgICBpZiAodGhpcy5maW5kUm9sZSA9PT0gIuaCo+iAhSIpIHsKICAgICAgICAgICAgICAgIHJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAuZ2V0KCJwYXRpZW50L3NlbmRFbWFpbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwRW1haWw6IHRoaXMuZmluZEZvcm0ucEVtYWlsLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZpbmRGb3JtLnBFbWFpbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgIT09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLor6Xpgq7nrrHmmoLmnKrms6jlhozvvIHor7flhYjms6jlhozvvIEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumqjOivgeeggeWPkemAgeaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8v5aaC5p6c5piv6YCJ5Lit566h55CG5ZGYCiAgICAgICAgICAgIGlmICh0aGlzLmZpbmRSb2xlID09PSAi566h55CG5ZGYIikgewogICAgICAgICAgICAgICAgcmVxdWVzdAogICAgICAgICAgICAgICAgICAgIC5nZXQoImFkbWluL3NlbmRFbWFpbCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhRW1haWw6IHRoaXMuZmluZEZvcm0ucEVtYWlsLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZpbmRGb3JtLnBFbWFpbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgIT09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLor6Xpgq7nrrHmmoLmnKrms6jlhozvvIHor7flhYjms6jlhozvvIEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumqjOivgeeggeWPkemAgeaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8v5aaC5p6c5piv6YCJ5Lit5Yy755SfCiAgICAgICAgICAgIGlmICh0aGlzLmZpbmRSb2xlID09PSAi5Yy755SfIikgewogICAgICAgICAgICAgICAgcmVxdWVzdAogICAgICAgICAgICAgICAgICAgIC5nZXQoImRvY3Rvci9zZW5kRW1haWwiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZEVtYWlsOiB0aGlzLmZpbmRGb3JtLnBFbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5maW5kRm9ybS5wRW1haWwpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzICE9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi6K+l6YKu566x5pqC5pyq5rOo5YaM77yB6K+35YWI5rOo5YaM77yBIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLpqozor4HnoIHlj5HpgIHmiJDlip/vvIEiKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy/mj5DkuqTooajljZUKICAgICAgICBzdWJtaXRMb2dpbkZvcm0oZm9ybU5hbWUpIHsKICAgICAgICAgICAgaWYgKCEvXlxkKyQvLnRlc3QodGhpcy5sb2dpbkZvcm0uaWQpKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLnlKjmiLflkI3mnInor68iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvbGUgPT09ICLnrqHnkIblkZgiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoImFJZCIsIHRoaXMubG9naW5Gb3JtLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgiYVBhc3N3b3JkIiwgdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCJjYXB0Y2hhIiwgdGhpcy5sb2dpbkZvcm0uY2FwdGNoYSk7IC8vIOaWsOWinu+8mua3u+WKoOmqjOivgeeggeWPguaVsAoKICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QoImFkbWluL2xvZ2luIiwgcGFyYW1zKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyAhPSAyMDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDYXB0Y2hhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRva2VuKHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYWRtaW5MYXlvdXQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDYXB0Y2hhKCk7IC8vIOaWsOWinu+8muW8guW4uOeKtuWGteS4i+WIt+aWsOmqjOivgeeggQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZSA9PSB1bmRlZmluZWQgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5kYXRhID09IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZS5yZXNwb25zZS5kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm9sZSA9PT0gIuWMu+eUnyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtczEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczEuYXBwZW5kKCJkSWQiLCB0aGlzLmxvZ2luRm9ybS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczEuYXBwZW5kKCJkUGFzc3dvcmQiLCB0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczEuYXBwZW5kKCJjYXB0Y2hhIiwgdGhpcy5sb2dpbkZvcm0uY2FwdGNoYSk7IC8vIOaWsOWinu+8mua3u+WKoOmqjOivgeeggeWPguaVsAoKICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QoImRvY3Rvci9sb2dpbiIsIHBhcmFtczEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzICE9IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENhcHRjaGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRva2VuKHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvZG9jdG9yTGF5b3V0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FwdGNoYSgpOyAvLyDmlrDlop7vvJrlvILluLjmg4XlhrXkuIvliLfmlrDpqozor4HnoIEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2UgPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2UuZGF0YSA9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUucmVzcG9uc2UuZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvbGUgPT09ICLmgqPogIUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMyID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMyLmFwcGVuZCgicElkIiwgdGhpcy5sb2dpbkZvcm0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMyLmFwcGVuZCgicFBhc3N3b3JkIiwgdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMyLmFwcGVuZCgiY2FwdGNoYSIsIHRoaXMubG9naW5Gb3JtLmNhcHRjaGEpOyAvLyDmlrDlop7vvJrmt7vliqDpqozor4HnoIHlj4LmlbAKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KCJwYXRpZW50L2xvZ2luIiwgcGFyYW1zMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgIT0gMjAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FwdGNoYSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUb2tlbihyZXMuZGF0YS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3BhdGllbnRMYXlvdXQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDYXB0Y2hhKCk7IC8vIOaWsOWinu+8muW8guW4uOaDheWGteS4i+WIt+aWsOmqjOivgeeggQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZSA9PSB1bmRlZmluZWQgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5kYXRhID09IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZS5yZXNwb25zZS5kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBzdWJtaXQhISIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgIH0KfTsK"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgLA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"login-index\" :style=\"backgroundDiv\">\n        <div class=\"mid-index\">\n            <i\n                style=\"\n                    top: 40px;\n                    font-size: 28px;\n                    left: 20px;\n                    position: absolute;\n                \"\n                class=\"iconfont icon-r-love\"\n            >\n                登录医院管理系统\n            </i>\n            <el-form\n                :model=\"loginForm\"\n                :rules=\"loginRules\"\n                ref=\"ruleForm\"\n                class=\"loginForm\"\n            >\n                <el-form-item prop=\"id\">\n                    <!--必须绑定v-model输入框才能输入字符---->\n                    <el-input \n                        v-model=\"loginForm.id\"\n                        placeholder=\"请输入账号\"\n                    >\n                        <i\n                            slot=\"prefix\"\n                            class=\"iconfont icon-r-user1\"\n                            style=\"font-size: 22px\"\n                        ></i>\n                    </el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input \n                        v-model=\"loginForm.password\" \n                        show-password\n                        placeholder=\"请输入密码\"\n                    >\n                        <i\n                            slot=\"prefix\"\n                            class=\"iconfont icon-r-lock\"\n                            style=\"font-size: 22px\"\n                        ></i>\n                    </el-input>\n                </el-form-item>\n                <!-- 新增验证码输入框 -->\n                <el-form-item prop=\"captcha\">  <!-- 新增 -->\n                    <el-row :gutter=\"10\">  <!-- 新增 -->\n                        <el-col :span=\"14\">  <!-- 新增 -->\n                            <el-input \n                                v-model=\"loginForm.captcha\" \n                                placeholder=\"请输入验证码\"\n                            >  <!-- 新增 -->\n                                <i\n                                    slot=\"prefix\"\n                                    class=\"iconfont icon-r-code\"\n                                    style=\"font-size: 22px\"\n                                ></i>  <!-- 新增 -->\n                            </el-input>  <!-- 新增 -->\n                        </el-col>  <!-- 新增 -->\n                        <el-col :span=\"10\">  <!-- 新增 -->\n                            <div class=\"captcha-img\">  <!-- 新增 -->\n                                <img :src=\"captchaUrl\" @click=\"refreshCaptcha\" alt=\"验证码\" />  <!-- 新增 -->\n                            </div>  <!-- 新增 -->\n                        </el-col>  <!-- 新增 -->\n                    </el-row>  <!-- 新增 -->\n                </el-form-item>  <!-- 新增 -->\n\n                <!-- 角色单选框 -->\n                <el-form-item class=\"role\">\n                    <el-radio-group v-model=\"role\" size=\"small\" @change=\"refreshCaptcha\">\n                        <el-radio label=\"患者\"></el-radio>\n                        <el-radio label=\"医生\"></el-radio>\n                        <el-radio label=\"管理员\"></el-radio>\n                    </el-radio-group>\n                </el-form-item>\n\n                <el-form-item class=\"btns\">\n                    <el-button\n                        type=\"primary\"\n                        style=\"font-size: 18px\"\n                        @click=\"submitLoginForm('ruleForm')\"\n                    >\n                        <i\n                            class=\"iconfont icon-r-yes\"\n                            style=\"font-size: 20px\"\n                        ></i>\n                        登录</el-button\n                    >\n                    <el-button\n                        type=\"info\"\n                        style=\"font-size: 18px\"\n                        @click=\"registerFormVisible = true\"\n                    >\n                        <i\n                            class=\"iconfont icon-r-add\"\n                            style=\"font-size: 20px\"\n                        ></i>\n                        注册新账号</el-button\n                    >\n                </el-form-item>\n            </el-form>\n        </div>\n\n        <!-- 注册对话框 -->\n        <el-dialog title=\"用户注册\" :visible.sync=\"registerFormVisible\">\n            <el-form\n                class=\"findPassword\"\n                :model=\"registerForm\"\n                :rules=\"registerRules\"\n                ref=\"registerForm\"\n            >\n                <el-form-item label=\"账号\" label-width=\"80px\" prop=\"pId\">\n                    <el-input v-model.number=\"registerForm.pId\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"性别\" label-width=\"80px\">\n                    <el-radio v-model=\"registerForm.pGender\" label=\"男\"\n                        >男</el-radio\n                    >\n                    <el-radio v-model=\"registerForm.pGender\" label=\"女\"\n                        >女</el-radio\n                    >\n                </el-form-item>\n                <el-form-item label=\"密码\" label-width=\"80px\" prop=\"pPassword\">\n                    <el-input v-model=\"registerForm.pPassword\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"姓名\" label-width=\"80px\" prop=\"pName\">\n                    <el-input v-model=\"registerForm.pName\"></el-input>\n                </el-form-item>\n                <el-form-item\n                    label=\"出生日期\"\n                    label-width=\"80px\"\n                    prop=\"pBirthday\"\n                >\n                    <el-date-picker\n                        v-model=\"registerForm.pBirthday\"\n                        type=\"date\"\n                        placeholder=\"选择日期\"\n                        value-format=\"yyyy-MM-dd\"\n                    >\n                    </el-date-picker>\n                </el-form-item>\n                <el-form-item label=\"手机号\" label-width=\"80px\" prop=\"pPhone\">\n                    <el-input v-model=\"registerForm.pPhone\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"邮箱\" label-width=\"80px\" prop=\"pEmail\">\n                    <el-input v-model=\"registerForm.pEmail\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"身份证号\" label-width=\"80px\" prop=\"pCard\">\n                    <el-input v-model=\"registerForm.pCard\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button\n                    @click=\"registerFormVisible = false\"\n                    style=\"font-size: 18px\"\n                    ><i\n                        class=\"iconfont icon-r-left\"\n                        style=\"font-size: 20px\"\n                    ></i>\n                    取 消</el-button\n                >\n                <el-button\n                    type=\"primary\"\n                    @click=\"registerClick('registerForm')\"\n                    style=\"font-size: 18px\"\n                    ><i class=\"iconfont icon-r-yes\" style=\"font-size: 20px\"></i>\n                    确 定</el-button\n                >\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport request from \"@/utils/request.js\";\nimport { setToken } from \"@/utils/storage.js\";\nimport { toLoad } from \"@/utils/initialize.js\";\n\nexport default {\n    name: \"Login\",\n    data() {\n        var validateMoblie = (rule, value, callback) => {\n            if (value === undefined) {\n                callback(new Error(\"请输入手机号\"));\n            } else {\n                let reg =\n                    /^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\\d{8}$/;\n                if (!reg.test(value)) {\n                    callback(new Error(\"请输入合法的手机号\"));\n                }\n                callback();\n            }\n        };\n        var validateCard = (rule, value, callback) => {\n            if (value === undefined) {\n                callback(new Error(\"请输入身份证号\"));\n            } else {\n                let reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\n                if (!reg.test(value)) {\n                    callback(new Error(\"请输入合法的身份证号码\"));\n                }\n                callback();\n            }\n        };\n        var validatePass = (rule, value, callback) => {\n            if (value === \"\") {\n                callback(new Error(\"请输入密码\"));\n            } else {\n                if (this.findForm.checkPassword !== \"\") {\n                    this.$refs.findForm.validateField(\"checkPassword\");\n                }\n                callback();\n            }\n        };\n        var validatePass2 = (rule, value, callback) => {\n            if (value === \"\") {\n                callback(new Error(\"请再次输入密码\"));\n            } else if (value !== this.findForm.newPassword) {\n                callback(new Error(\"两次输入密码不一致!\"));\n            } else {\n                callback();\n            }\n        };\n        return {\n            //背景图片\n            backgroundDiv: {\n                backgroundImage:\n                    \"url(\" + require(\"../assets/doctor.jpeg\") + \")\",\n                backgroundRepeat: \"no-repeat\",\n                backgroundSize: \"100% 100%\",\n            },\n            loginForm: {\n                id: \"\",\n                password: \"\",\n                captcha: \"\",  // 新增验证码字段\n            },\n            loginRules: {\n                id: [\n                    {\n                        required: true,\n                        message: \"请输入账号编号\",\n                        trigger: \"blur\",\n                    },\n                    {\n                        min: 3,\n                        max: 50,\n                        message: \"长度在 3到 50 个字符\",\n                        trigger: \"blur\",\n                    },\n                ],\n                password: [\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\n                ],\n                // 新增验证码验证规则\n                captcha: [  // 新增\n                    { required: true, message: \"请输入验证码\", trigger: \"blur\" },  // 新增\n                    { min: 4, max: 4, message: \"验证码长度为4位\", trigger: \"blur\" }  // 新增\n                ],  // 新增\n            },\n            role: \"患者\",\n            findRole: \"患者\",\n            //找回密码\n            findFormVisible: false,\n            findForm: {\n                code: \"\",\n                newPassword: \"\",\n                checkPassword: \"\",\n                pEmail: \"\",\n            },\n\n            findRules: {\n                pEmail: [\n                    {\n                        required: true,\n                        message: \"请输入邮箱地址\",\n                        trigger: \"blur\",\n                    },\n                    {\n                        type: \"email\",\n                        message: \"请输入正确的邮箱地址\",\n                        trigger: [\"blur\", \"change\"],\n                    },\n                ],\n                code: [\n                    {\n                        required: true,\n                        message: \"请输入验证码\",\n                        trigger: \"blur\",\n                    },\n                ],\n                newPassword: [{ validator: validatePass, trigger: \"blur\" }],\n                checkPassword: [{ validator: validatePass2, trigger: \"blur\" }],\n            },\n            totalTime: 60,\n            content: \"发送验证码\",\n            canClick: true,\n            //注册\n            registerFormVisible: false,\n            registerForm: {\n                pGender: \"男\",\n            },\n            registerRules: {\n                pId: [\n                    { required: true, message: \"请输入账号\", trigger: \"blur\" },\n                    {\n                        type: \"number\",\n                        message: \"账号必须数字类型\",\n                        trigger: \"blur\",\n                    },\n                ],\n                pPassword: [\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\n                    {\n                        min: 4,\n                        max: 50,\n                        message: \"长度在 4到 50 个字符\",\n                        trigger: \"blur\",\n                    },\n                ],\n                pName: [\n                    { required: true, message: \"请输入姓名\", trigger: \"blur\" },\n                    {\n                        min: 2,\n                        max: 8,\n                        message: \"长度在 2到 8 个字符\",\n                        trigger: \"blur\",\n                    },\n                ],\n                pEmail: [\n                    { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\n                    {\n                        type: \"email\",\n                        message: \"请输入正确的邮箱地址\",\n                        trigger: [\"blur\", \"change\"],\n                    },\n                ],\n                pPhone: [{ validator: validateMoblie }],\n                pCard: [{ validator: validateCard }],\n                pBirthday: [\n                    {\n                        required: true,\n                        message: \"选择出生日期\",\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n            // 新增验证码相关属性\n            captchaUrl: \"\",  // 新增：验证码图片URL\n        };\n    },\n    mounted() {\n        toLoad();\n        this.refreshCaptcha();  // 关键：页面初始化时调用，自动获取验证码\n    },\n    methods: {\n        // 新增：刷新验证码\n        refreshCaptcha() {  // 新增\n            // 根据角色获取对应验证码接口\n            let url = \"\";  // 新增\n            if (this.role === \"管理员\") {  // 新增\n                url = \"admin/getCaptcha\";  // 新增\n            } else if (this.role === \"医生\") {  // 新增\n                url = \"doctor/getCaptcha\";  // 新增\n            } else {  // 新增\n                url = \"patient/getCaptcha\";  // 新增\n            }  // 新增\n            // 添加随机数防止缓存\n            this.captchaUrl = request.defaults.baseURL + \"/\" + url + \"?t=\" + Math.random();  // 新增\n        },  // 新增\n        //点击注册确认按钮\n        registerClick(formName) {\n            this.$refs[formName].validate((valid) => {\n                if (valid) {\n                    request\n                        .get(\"patient/addPatient\", {\n                            params: {\n                                pId: this.registerForm.pId,\n                                pName: this.registerForm.pName,\n                                pPassword: this.registerForm.pPassword,\n                                pGender: this.registerForm.pGender,\n                                pEmail: this.registerForm.pEmail,\n                                pPhone: this.registerForm.pPhone,\n                                pCard: this.registerForm.pCard,\n                                pBirthday: this.registerForm.pBirthday,\n                            },\n                        })\n                        .then((res) => {\n                            if (res.data.status !== 200)\n                                return this.$message.error(\n                                    \"账号或邮箱已被占用！\"\n                                );\n                            this.registerFormVisible = false;\n                            this.$message.success(\"注册成功！\");\n                            console.log(res);\n                        });\n                } else {\n                    console.log(\"error submit!!\");\n                    return false;\n                }\n            });\n        },\n        // 点击找回密码确认按钮\n        findPassword(findForm) {\n            this.$refs[findForm].validate((valid) => {\n                if (valid) {\n                    //如果是选中患者\n                    if (this.findRole === \"患者\") {\n                        request\n                            .get(\"patient/findPassword\", {\n                                params: {\n                                    pEmail: this.findForm.pEmail,\n                                    pPassword: this.findForm.newPassword,\n                                    code: this.findForm.code,\n                                },\n                            })\n                            .then((res) => {\n                                if (res.data.status !== 200)\n                                    return this.$message.error(\n                                        \"验证码错误或者已过期！！！\"\n                                    );\n                                this.$message.success(\"密码修改成功！！请登录\");\n                                this.findFormVisible = false;\n                            });\n                    }\n                    //如果是选中管理员\n                    if (this.findRole === \"管理员\") {\n                        request\n                            .get(\"admin/findPassword\", {\n                                params: {\n                                    aEmail: this.findForm.pEmail,\n                                    aPassword: this.findForm.newPassword,\n                                    code: this.findForm.code,\n                                },\n                            })\n                            .then((res) => {\n                                if (res.data.status !== 200)\n                                    return this.$message.error(\n                                        \"验证码错误或者已过期！！！\"\n                                    );\n                                this.$message.success(\"密码修改成功！！请登录\");\n                                this.findFormVisible = false;\n                            });\n                    }\n                    //如果是选中患者\n                    if (this.findRole === \"医生\") {\n                        request\n                            .get(\"doctor/findPassword\", {\n                                params: {\n                                    dEmail: this.findForm.pEmail,\n                                    dPassword: this.findForm.newPassword,\n                                    code: this.findForm.code,\n                                },\n                            })\n                            .then((res) => {\n                                if (res.data.status !== 200)\n                                    return this.$message.error(\n                                        \"验证码错误或者已过期！！！\"\n                                    );\n                                this.$message.success(\"密码修改成功！！请登录\");\n                                this.findFormVisible = false;\n                            });\n                    }\n                } else {\n                    console.log(\"error submit!!\");\n                    return false;\n                }\n            });\n        },\n        //点击发送验证码按钮\n        sendEmail() {\n            //倒计时\n            if (!this.canClick) return; //改动的是这两行代码\n            this.canClick = false;\n            this.content = this.totalTime + \"s后重新发送\";\n            let clock = window.setInterval(() => {\n                this.totalTime--;\n                this.content = this.totalTime + \"s后重新发送\";\n                if (this.totalTime < 0) {\n                    window.clearInterval(clock);\n                    this.content = \"重新发送验证码\";\n                    this.totalTime = 10;\n                    this.canClick = true; //这里重新开启\n                }\n            }, 1000);\n\n            //如果是选中患者\n            if (this.findRole === \"患者\") {\n                request\n                    .get(\"patient/sendEmail\", {\n                        params: {\n                            pEmail: this.findForm.pEmail,\n                        },\n                    })\n                    .then((res) => {\n                        console.log(this.findForm.pEmail);\n                        console.log(res);\n                        if (res.data.status !== 200)\n                            return this.$message.error(\n                                \"该邮箱暂未注册！请先注册！\"\n                            );\n                        this.$message.success(\"验证码发送成功！\");\n                    });\n            }\n            //如果是选中管理员\n            if (this.findRole === \"管理员\") {\n                request\n                    .get(\"admin/sendEmail\", {\n                        params: {\n                            aEmail: this.findForm.pEmail,\n                        },\n                    })\n                    .then((res) => {\n                        console.log(this.findForm.pEmail);\n                        console.log(res);\n                        if (res.data.status !== 200)\n                            return this.$message.error(\n                                \"该邮箱暂未注册！请先注册！\"\n                            );\n                        this.$message.success(\"验证码发送成功！\");\n                    });\n            }\n            //如果是选中医生\n            if (this.findRole === \"医生\") {\n                request\n                    .get(\"doctor/sendEmail\", {\n                        params: {\n                            dEmail: this.findForm.pEmail,\n                        },\n                    })\n                    .then((res) => {\n                        console.log(this.findForm.pEmail);\n                        console.log(res);\n                        if (res.data.status !== 200)\n                            return this.$message.error(\n                                \"该邮箱暂未注册！请先注册！\"\n                            );\n                        this.$message.success(\"验证码发送成功！\");\n                    });\n            }\n        },\n        //提交表单\n        submitLoginForm(formName) {\n            if (!/^\\d+$/.test(this.loginForm.id)) {\n                this.$message.error(\"用户名有误\");\n                return;\n            }\n            this.$refs[formName].validate((valid) => {\n                if (valid) {\n                    if (this.role === \"管理员\") {\n                        var params = new URLSearchParams();\n                        params.append(\"aId\", this.loginForm.id);\n                        params.append(\"aPassword\", this.loginForm.password);\n                        params.append(\"captcha\", this.loginForm.captcha); // 新增：添加验证码参数\n\n                        request\n                            .post(\"admin/login\", params)\n                            .then((res) => {\n                                console.log(res);\n                                if (res.data.status != 200){\n                                    this.refreshCaptcha();\n                                    return this.$message.error(res.data.msg);\n                                }\n                                setToken(res.data.data.token);\n                                this.$router.push(\"/adminLayout\");\n                            })\n                            .catch((e) => {\n                                console.log(e);\n                                this.refreshCaptcha(); // 新增：异常状况下刷新验证码\n                                if (\n                                    e.response == undefined ||\n                                    e.response.data == undefined\n                                ) {\n                                    this.$message({\n                                        showClose: true,\n                                        message: e,\n                                        type: \"error\",\n                                        duration: 5000,\n                                    });\n                                } else {\n                                    this.$message({\n                                        showClose: true,\n                                        message: e.response.data,\n                                        type: \"error\",\n                                        duration: 5000,\n                                    });\n                                }\n                            });\n                    }\n                    if (this.role === \"医生\") {\n                        var params1 = new URLSearchParams();\n                        params1.append(\"dId\", this.loginForm.id);\n                        params1.append(\"dPassword\", this.loginForm.password);\n                        params1.append(\"captcha\", this.loginForm.captcha); // 新增：添加验证码参数\n\n                        request\n                            .post(\"doctor/login\", params1)\n                            .then((res) => {\n                                console.log(res);\n                                if (res.data.status != 200){\n                                    this.refreshCaptcha();\n                                    return this.$message.error(res.data.msg);   \n                                }          \n                                setToken(res.data.data.token);\n                                this.$router.push(\"/doctorLayout\");\n                            })\n                            .catch((e) => {\n                                console.log(e);\n                                this.refreshCaptcha(); // 新增：异常情况下刷新验证码\n                                if (\n                                    e.response == undefined ||\n                                    e.response.data == undefined\n                                ) {\n                                    this.$message({\n                                        showClose: true,\n                                        message: e,\n                                        type: \"error\",\n                                        duration: 5000,\n                                    });\n                                } else {\n                                    this.$message({\n                                        showClose: true,\n                                        message: e.response.data,\n                                        type: \"error\",\n                                        duration: 5000,\n                                    });\n                                }\n                            });\n                    }\n                    if (this.role === \"患者\") {\n                        var params2 = new URLSearchParams();\n                        params2.append(\"pId\", this.loginForm.id);\n                        params2.append(\"pPassword\", this.loginForm.password);\n                        params2.append(\"captcha\", this.loginForm.captcha); // 新增：添加验证码参数\n\n                        request\n                            .post(\"patient/login\", params2)\n                            .then((res) => {\n                                console.log(res);\n                                if (res.data.status != 200){\n                                    this.refreshCaptcha();\n                                    return this.$message.error(res.data.msg);\n                                }   \n                                setToken(res.data.data.token);\n                                this.$router.push(\"/patientLayout\");\n                            })\n                            .catch((e) => {\n                                console.log(e);\n                                this.refreshCaptcha(); // 新增：异常情况下刷新验证码\n                                if (\n                                    e.response == undefined ||\n                                    e.response.data == undefined\n                                ) {\n                                    this.$message({\n                                        showClose: true,\n                                        message: e,\n                                        type: \"error\",\n                                        duration: 5000,\n                                    });\n                                } else {\n                                    this.$message({\n                                        showClose: true,\n                                        message: e.response.data,\n                                        type: \"error\",\n                                        duration: 5000,\n                                    });\n                                }\n                            });\n                    }\n                } else {\n                    console.log(\"error submit!!\");\n                    return false;\n                }\n            });\n        },\n    }\n};\n</script>\n\n<style lang=\"scss\">\n// 新增验证码图片样式\n.captcha-img {  /* 新增 */\n    width: 100%;  /* 新增 */\n    height: 40px;  /* 新增 */\n    cursor: pointer;  /* 新增 */\n    overflow: hidden;  /* 新增 */\n    img {  /* 新增 */\n        width: 100%;  /* 新增 */\n        height: 100%;  /* 新增 */\n        object-fit: cover;  /* 新增 */\n    }  /* 新增 */\n}  /* 新增 */\n.codeInput {\n    width: 70%;\n    margin-right: 10px;\n}\n.findPassword {\n    margin-top: 0px;\n}\n.login-index {\n    background: #2b4b6b;\n    height: 100vh;\n    position: relative;\n}\n.mid-index {\n    opacity: 0.9;\n    width: 450px;\n    height: 390px;\n    background: white;\n    //绝对定位，相对于最左上角来说\n    position: absolute;\n    left: 70%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    overflow: hidden;\n}\n.logo-index {\n    background: white;\n    height: 130px;\n    width: 130px;\n    border-radius: 50%;\n    padding: 10px;\n    //子绝父相,使一个div悬挂在另一个div上中间\n    position: absolute;\n    left: 50%;\n    top: 0;\n    transform: translate(-50%, -50%);\n\n    border: 1px solid #eee;\n    box-shadow: 0px 0px 10px #ddd;\n\n    img {\n        height: 100%;\n        width: 100%;\n        border-radius: 50%;\n        background: #eeeeee;\n    }\n}\n\n.loginForm {\n    margin-top: 100px;\n}\n.el-form-item {\n    margin-left: 20px;\n    margin-right: 20px;\n    margin-bottom: 15px; /* 增加表单项之间的间距，避免拥挤 */\n}\n//角色单选\n.role {\n    margin-left: 90px;\n    margin-right: 90px;\n    margin-bottom: 15px; /* 增加间距 */\n}\n//按钮\n.btns {\n    display: flex;\n    justify-content: flex-end;\n    height: 25px;\n}\n</style>\n"]}]}